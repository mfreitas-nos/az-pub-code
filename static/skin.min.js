$(window).on("load", function() {

	// Adapt some class to fit Bootstrap theme
	$("div.message-positive").addClass("alert-success");
	$("div.message-warning").addClass("alert-warning");
	$("div.message-negative").addClass("alert-danger");

	$("table.info").addClass("table");

	$(".notifCheck").addClass("checkbox");

	// Collapse menu on click
	$('.collapse li[class!="dropdown"]').on('click', function() {
		if (!$('.navbar-toggler').hasClass('collapsed')) {
			$(".navbar-toggler").trigger("click");
		}
	});

	// // Input + label
	// $('.form-group input').on('focus', function() {
	// 	$(this).prev().addClass('is-active');
	// });

	// $('.form-group input').blur(function() {
	// 	if( $(this).val().length === 0 ) {
	// 		$(this).prev().removeClass('is-active');
	// 	}
	// });

	// Click to copy
	$('.click-to-copy').click(function() {
		var button = $(this);
		var copyID = button.data('copy-id');
		var copyText = $('#' + copyID).text();
		if (navigator.clipboard != undefined) {
			navigator.clipboard.writeText(copyText);
			$('<p>O c처digo foi copiado</p>').insertAfter(button).delay(2000).fadeOut();
		} else {
			$(this).after('<p class="error">O c처digo n찾o foi copiado. Tente novamente ou copie manualmente o c처digo</p>');
		}
	});

	// Error message

	$('body').on('DOMSubtreeModified', '.js-msg-hide', function(){
		console.log('changed');
		if($('.js-msg-hide').text() == 'Your new TOTP key, please test it and enter the code' || $('.js-msg-hide').text() == 'yourNewTotpKey') {
			$('.js-msg-hide').hide();
		} else {
			$('.js-msg-hide').show();
		}
	});


	// Remember selected tab
	$('#authMenu .nav-link').on('click', function (e) {
		window.datas.choicetab = e.target.hash.substr(1)
	});

	// Transmit attributes to remove2f modal
	$('#remove2fModal').on('show.bs.modal', function (event) {
	var button = $(event.relatedTarget) // Button that triggered the modal
	var device = button.attr('device') // Extract device/epoch from button
	var epoch = button.attr('epoch')
	var modal = $(this)

	// Set device/epoch on modal remove2f button so that the portal JS code can find it
	modal.find('.remove2f').attr('device', device)
	modal.find('.remove2f').attr('epoch', epoch)
})


});
